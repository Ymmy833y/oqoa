# ğŸ” 8. å¤–éƒ¨é€£æº

## Google Drive é€£æºæ¦‚è¦
1. è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«ã§ Client ID / Folder ID ã‚’å…¥åŠ›
2. Google Identity Services ã§ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—
3. Drive API ã§ãƒ•ã‚©ãƒ«ãƒ€å†… JSON ã‚’å–å¾—
4. JSON ã‚’ Question / QList ã«å¤‰æ›
5. Repository ã¸ä¿å­˜ã—ã€ç”»é¢ã‚’æ›´æ–°

å‚ç…§: `src/app/api/google_auth.ts:100-167`

## é€£æºã‚·ãƒ¼ã‚±ãƒ³ã‚¹
```mermaid
sequenceDiagram
  participant User as User
  participant View as View
  participant Controller as Controller
  participant Service as ImportService
  participant Drive as GoogleDrive
  User->>View: ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Ÿè¡Œ
  View->>Controller: IMPORT_GOOGLE_DRIVE_DATA
  Controller->>Service: importProbelmForGoogleDrive
  Service->>Drive: OAuth + files.list + files.get
  Drive-->>Service: JSON payloads
  Service-->>Controller: ToastMessage
  Controller->>View: render
```

## é–¢é€£ãƒªãƒ³ã‚¯
- å–å¾—ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¯ [æ°¸ç¶šåŒ–ã¨ãƒªãƒã‚¸ãƒˆãƒª](./06-æ°¸ç¶šåŒ–ã¨ãƒªãƒã‚¸ãƒˆãƒª) ã‚’å‚ç…§

## ğŸ” å‚ç…§ã‚³ãƒ¼ãƒ‰
å‚ç…§: `src/app/services/import_google_drive_service.ts:11-41`ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆã¯èª¬æ˜ç”¨ã«è¿½è¨˜ï¼‰

```ts
// NOTE: ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—å¾Œã« JSON ã‚’å–å¾—ã—ã¦ä¿å­˜ã™ã‚‹
export async function importProbelmForGoogleDrive(
  clientId: string,
  folderId: string,
): Promise<ToastMessage> {
  try {
    // Google Identity Services ã®ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
    const accessToken = await requestAccessTokenWithClientId(clientId);

    // Drive ã‹ã‚‰ JSON ç¾¤ã‚’å–å¾—ï¼ˆã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆè§£æ±ºãƒ»Docsé™¤å¤–ãƒ»JSONã®ã¿ï¼‰
    const files = await fetchAllJsonFromFolderStrict(accessToken, folderId);
    if (!files.length) {
      return {
        uuid: crypto.randomUUID(),
        message: "å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€ã« JSON ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚",
        kind: ToastMessageKind.SUCCESS,
      };
    }
```
